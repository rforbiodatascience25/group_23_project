---
title: "Survival Analysis"
format: html
editor: visual
---

# Library import

```{r}
library(readr)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(purrr)
library(survival)
```

# Data import

```{r}
clinical_sample <- read.delim(here("data", "data_clinical_sample.txt"), sep = "\t", skip = 4, header = TRUE)

mutations <- read.delim(here("data", "data_mutations.txt"), sep = "\t", header = TRUE)

clinical_patient <- read.delim(here("data", "data_clinical_patient.txt"), sep = "\t", skip = 4, header = TRUE)
```

# Data wrangling

Need sex, age, cancer type to be transformed to numerical categories

# Kaplan-Meier curve

```{r}
patients$Survival_Months <- as.numeric(patients$Survival_Months)

KM_f <- survfit(Surv(Survival_Months, OS_status) ~1, data = patients)

#convert to a tibble

tibble_KM_f <- tibble(
  time = KM_f$time,
  survival = KM_f$surv)

ggplot(tibble_KM_f, 
       mapping = aes(x = time,
                     y = survival))+
  geom_line()+
  labs(title = 'Overall Survival rate of the patients')
```

# Cox regression
